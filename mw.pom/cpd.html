<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>universAAL Middleware Suite &#x2013; CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                universAAL Middleware Suite
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017</span>
                  &nbsp;| <span id="projectVersion">Version: 3.4.2-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="./" title="universAAL Middleware Suite">universAAL Middleware Suite</a>
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../../platform/index.html" title="universAAL Super POM">universAAL Super POM</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="../middleware.core/mw.pom.core/index.html" title="universAAL Middleware Suite (Core)">universAAL Middleware Suite (Core)</a>
            </li>
                  <li class="none">
                          <a href="../middleware.osgi/mw.pom.osgi/index.html" title="universAAL Middleware Suite (OSGi)">universAAL Middleware Suite (OSGi)</a>
            </li>
                  <li class="none">
                          <a href="../middleware.config/mw.pom.config/index.html" title="universAAL Middleware Suite (Config)">universAAL Middleware Suite (Config)</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                          <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="checkstyle-aggregate.html" title="Checkstyle">Checkstyle</a>
            </li>
                      <li class="none">
            <strong>CPD</strong>
          </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD">PMD</a>
            </li>
                      <li class="none">
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">Cobertura Test Coverage</a>
            </li>
                      <li class="none">
                          <a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="taglist.html" title="Tag List">Tag List</a>
            </li>
                      <li class="none">
                          <a href="directive-checks.html" title="universAAL Directive Checks">universAAL Directive Checks</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="CPD_Results"></a>CPD Results</h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.6.1.</p></div>
<div class="section">
<h2><a name="Duplications"></a>Duplications</h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>364</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>387</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	}

	private void TryLoadingOnts(List&lt;Ontology&gt; toBeLoaded, boolean isInMyProject,
			Map&lt;Ontology, OntologyLoaderTask&gt; pendingOnts, List&lt;OntologyLoaderTask&gt; loadingOrder,
			int totalOntologiesFound) {

		// filter the list of onts to those are isInMyProject
		List&lt;Ontology&gt; ontStep = new ArrayList&lt;Ontology&gt;();
		for (Ontology o : toBeLoaded) {
			if (isInMyProy(o) == isInMyProject)
				ontStep.add(o);
		}

		// System.out.println(&quot;-- Try loading the following onts: &quot; +
		// ontStep.size());
		// for (Ontology o : ontStep) {
		// System.out.println(&quot; ---- &quot; + o.getInfo().getURI());
		// }

		while (!ontStep.isEmpty()) {
			Ontology next = ontStep.remove(0);
			OntologyLoaderTask otl = pendingOnts.get(next);

			otl.attempt();
			if ((!otl.allImportsRegistered() || otl.errors &gt; 0) &amp;&amp; otl.attempts &lt;= totalOntologiesFound * 2) {
				otl.unregister();
				ontStep.add(next);
				continue;
			}
			loadingOrder.add(otl);
		}
	}

	/**
	 * Recovers the serializer.
	 *
	 * @return the serializer.
	 */
	protected MessageContentSerializer getContentserializer() {
		if (contentSerializer == null) {
			contentSerializer = (MessageContentSerializer) mc.getContainer().fetchSharedObject(mc,
					new Object[] { MessageContentSerializer.class.getName() });
			if (contentSerializer == null) {
				System.out.println(&quot;ERROR: no serializer found for serializing the ontology&quot;);
			}
		}
		return contentSerializer;
	}

	/**
	 * Uses reflection to locate all {@link ModuleActivator}s in the package
	 * org.universAAL.ontology .
	 *
	 * @return all instances of module activators.
	 */
	private List&lt;Ontology&gt; getOntologies() {
		List&lt;Ontology&gt; onts = new ArrayList&lt;Ontology&gt;();

		Reflections reflections = new Reflections(&quot;org.universAAL.ontology&quot;);

		try {
			Set&lt;?&gt; subTypes = reflections.getSubTypesOf(Class.forName(Ontology.class.getName()));

			for (Object o : subTypes) {
				if (o instanceof Class&lt;?&gt;) {
					try {
						onts.add((Ontology) ((Class&lt;?&gt;) o).newInstance());
					} catch (Exception e) {
						LogUtils.logError(mc, getClass(), &quot;getOntologies&quot;,
								new String[] { &quot;could not instantiate: &quot; + ((Class) o).getName() }, e);
					}
				}
			}
		} catch (ClassNotFoundException e) {
			LogUtils.logError(mc, getClass(), &quot;getOntologyModules&quot;, new String[] { &quot;Unexpected error&quot; }, e);
		}

		return onts;
	}

	/**
	 * Write to target/ontologies the serializations (in TTL, and OWL) of a
	 * given ontology.
	 *
	 * @param ont
	 *            the ontology to be serialized.
	 * @return true iif the operation was successful.
	 */
	protected boolean generateOntFiles4Ont(Ontology ont) {
		if (!owlDir.exists() &amp;&amp; !owlDir.mkdirs()) {
			return false;
		}
		String name = ontFileName(ont);
		File ttlFile = new File(owlDir, name + &quot;.ttl&quot;);
		return writeTTL(ont, ttlFile) &amp;&amp; transformTTL2OWL(ttlFile, new File(owlDir, name + &quot;.owl&quot;));
	}

	/**
	 * Write to target/ontologies the serializations (in TTL, and OWL) of all
	 * loaded ontologies for the testcase.
	 *
	 * @return true iif the operation was successful
	 */
	protected boolean generateOntFiles4ALL() {
		boolean out = true;
		String[] onts = OntologyManagement.getInstance().getOntoloyURIs();
		for (int i = 0; i &lt; onts.length; i++) {
			Ontology ont = OntologyManagement.getInstance().getOntology(onts[i]);
			if (!generateOntFiles4Ont(ont)) {
				LogUtils.logError(mc, getClass(), &quot;generateOntFiles4All&quot;, &quot;Unable to generate file for: &quot; + onts[i]);
				out = false;
			}
		}
		return out;
	}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>521</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>525</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		return false;
	}

	/**
	 * Construct an appropriate filename for a given ontology.
	 *
	 * @param ont
	 *            the ontology to generate the filename
	 * @return the file name corresponding to the filename stated in the URI, if
	 *         not possible to determine a random name is given.
	 */
	private String ontFileName(Ontology ont) {
		String name = ont.getInfo().getFilename();
		if (name.endsWith(&quot;.owl&quot;)) // remove &quot;.owl&quot; at the end
			name = name.substring(0, name.length() - 4);
		if (name == null) {
			LogUtils.logWarn(mc, getClass(), &quot;ontFileName&quot;,
					&quot;unable to get Name for: &quot; + ont.getInfo().getURI() + &quot; , generating random name.&quot;);
			name = Integer.toHexString(new Random(System.currentTimeMillis()).nextInt());
		}
		return name;
	}

	/**
	 * Serializes and writes a TTL for a given {@link Ontology}.
	 *
	 * @param ont
	 *            The ontology to be serialized.
	 * @param ttlFile
	 *            The target file.
	 * @return true iif the operation was successful.
	 */
	private boolean writeTTL(Ontology ont, File ttlFile) {
		LogUtils.logInfo(mc, getClass(), &quot;writeTTL&quot;, &quot;Writing turtle serialization of ontology: &quot;
				+ ont.getInfo().getURI() + &quot;\n\t to: &quot; + ttlFile.getAbsolutePath());
		String serializedOntology = getContentserializer().serialize(ont);
		try {
			BufferedWriter out = new BufferedWriter(new FileWriter(ttlFile, false));
			out.write(serializedOntology);
			out.flush();
			out.close();
			return true;
		} catch (IOException e) {
			LogUtils.logError(mc, getClass(), &quot;writeTTL&quot;, new String[] { &quot;Unexpected Error&quot; }, e);
			return false;
		}
	}

	/**
	 * Transform a given TTL file into an OWL file.
	 *
	 * @param ttlFile
	 *            the source file.
	 * @param owlFile
	 *            the target file
	 * @return true iif the operation was successful.
	 */
	private boolean transformTTL2OWL(File ttlFile, File owlFile) {
		LogUtils.logInfo(mc, getClass(), &quot;transformTTL2OWL&quot;,
				&quot;Transforming file: &quot; + ttlFile.getAbsolutePath() + &quot;\n\t to: &quot; + owlFile.getAbsolutePath());
		OWLOntologyManager manager = OWLManager.createOWLOntologyManager();
		IRI documentIRI = IRI.create(ttlFile);
		OWLOntology owlOntology;
		try {
			owlOntology = manager.loadOntologyFromOntologyDocument(documentIRI);
			LogUtils.logInfo(mc, getClass(), &quot;transformTTL2OWL&quot;, &quot;   Loaded ontology: &quot; + owlOntology);

			OWLOntologyFormat format = manager.getOntologyFormat(owlOntology);

			RDFXMLOntologyFormat rdfxmlFormat = new RDFXMLOntologyFormat();
			if (format.isPrefixOWLOntologyFormat()) {
				rdfxmlFormat.copyPrefixesFrom(format.asPrefixOWLOntologyFormat());
			}
			manager.saveOntology(owlOntology, rdfxmlFormat, IRI.create(owlFile));
			LogUtils.logInfo(mc, getClass(), &quot;transformTTL2OWL&quot;,
					&quot;   Saved ontology &quot; + owlOntology + &quot; in file &quot; + owlFile.getAbsolutePath());
		} catch (OWLOntologyCreationException e1) {
			e1.printStackTrace();
			return false;
		} catch (OWLOntologyStorageException e) {
			e.printStackTrace();
			return false;
		}

		return true;
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>284</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>301</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		List&lt;OntologyLoaderTask&gt; loadingOrder = new ArrayList&lt;OntTestCase.OntologyLoaderTask&gt;();
		for (Ontology ont : toBeLoaded) {
			pendingOnts.put(ont, new OntologyLoaderTask(ont));
		}

		// first add all onts that are not from this project
		TryLoadingOnts(toBeLoaded, false, pendingOnts, loadingOrder, totalOntologiesFound);

		// then add all onts that are from this project
		TryLoadingOnts(toBeLoaded, true, pendingOnts, loadingOrder, totalOntologiesFound);

		// while (!toBeLoaded.isEmpty() ) {
		// Ontology next = toBeLoaded.remove(0);
		// OntologyLoaderTask otl = pendingOnts.get(next);
		//
		// otl.attempt();
		// if ((!otl.allImportsRegistered()
		// || otl.errors &gt; 0)
		// &amp;&amp; otl.attempts &lt;= totalOntologiesFound*2){
		// otl.unregister();
		// toBeLoaded.add(next);
		// continue;
		// }
		// loadingOrder.add(otl);
		// }

		// Print Summary
		StringBuffer ls = new StringBuffer();
		ls.append(&quot;AUTO LOAD RESULT\n&quot;);
		ls.append(&quot; Load Order:\n&quot;);
		StringBuffer sb = new StringBuffer();
		sb.append(&quot; Ontology problems found in this project:\n&quot;);
		StringBuffer sbo = new StringBuffer(&quot; Problems detected in other Ontologies:\n&quot;);
		boolean problems = false;
		boolean otherProblems = false;
		boolean fail = false;
		for (OntologyLoaderTask olt : loadingOrder) {
			ls.append(
					&quot;\t&quot; + (isInMyProy(olt.ont) ? &quot;* &quot; : &quot;  &quot;) + olt.ont.getInfo().getURI() + &quot; &quot; + olt.report() + &quot;\n&quot;);
			if (isInMyProy(olt.ont)) {
				if (!olt.logEntries.isEmpty()) {
					sb.append(&quot;\t&quot; + olt.ont.getInfo().getURI() + &quot;\n&quot;);
					problems = true;
					for (LogEntry le : olt.logEntries) {
						sb.append(&quot;\t\t&quot; + le.toString().replaceAll(&quot;\n&quot;, &quot;\n\t\t&quot;) + &quot;\n&quot;);
						if (le.logLevel &gt;= LogListener.LOG_LEVEL_WARN)
							fail = true;
					}
				}
			} else {
				if (!olt.logEntries.isEmpty()) {
					sbo.append(&quot;\t&quot; + olt.ont.getInfo().getURI() + &quot;\n&quot;);
					otherProblems = true;
					for (LogEntry le : olt.logEntries) {
						sbo.append(&quot;\t\t&quot; + le.toString().replaceAll(&quot;\n&quot;, &quot;\n\t\t&quot;) + &quot;\n&quot;);
					}
				}

			}
		}
		LogUtils.logInfo(mc, getClass(), &quot;autoLoadOntologies&quot;, ls.toString());
		if (problems) {
//			System.err.println(sb.toString());
			LogUtils.logError(mc, getClass(), &quot;autoLoadOntologies&quot;, sb.toString());
		}
		if (otherProblems) {
//			System.out.print(sbo.toString());
			LogUtils.logWarn(mc, getClass(), &quot;autoLoadOntologies&quot;, sbo.toString());
		}

		if (problems) {
			if (fail) {
				LogUtils.logError(mc, getClass(), &quot;autoLoadOntologies&quot;, &quot;Severe problems found, failing build.&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/managers/configuration/core/impl/secondaryManagers/SharedObjectConnector.java</td>
<td>universAAL Middleware Manager Configuration (Core)</td>
<td>32</td></tr>
<tr class="a">
<td>org/universAAL/middleware/managers/distributedmw/impl/SharedObjectConnector.java</td>
<td>universAAL Middleware Manager Distributed MW (Core)</td>
<td>32</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>public class SharedObjectConnector implements SharedObjectListener {

	private ModuleContext context;
	private SpaceManager spaceManager;
	private MessageContentSerializer messageContentSerializer;
	private boolean stopping = false;
	private ControlBroker controlBroker;

	public ModuleContext getContext() {
		return context;
	}

	/**
	 * @return the SpaceManager
	 */
	public synchronized final SpaceManager getSpaceManager() {
		while (!stopping &amp;&amp; spaceManager == null) {
			try {
				wait();
			} catch (InterruptedException e) {
			}
		}
		return spaceManager;
	}

	/**
	 * @return the controlBroker
	 */
	public synchronized final ControlBroker getControlBroker() {
		while (!stopping &amp;&amp; controlBroker == null) {
			try {
				wait();
			} catch (InterruptedException e) {
			}
		}
		return controlBroker;
	}

	/**
	 * @return the messageContentSerializer
	 */
	public synchronized final MessageContentSerializer getMessageContentSerializer() {
		while (!stopping &amp;&amp; messageContentSerializer == null) {
			try {
				wait();
			} catch (InterruptedException e) {
			}
		}
		return messageContentSerializer;
	}

	public SharedObjectConnector(ModuleContext mc) {
		context = mc;
		susbcribeFor(SpaceManager.class.getName());
		susbcribeFor(ControlBroker.class.getName());
		susbcribeFor(MessageContentSerializer.class.getName());
	}

	private synchronized void add(Object shr) {
		if (shr instanceof SpaceManager) {
			spaceManager = (SpaceManager) shr;
			notifyAll();
		} else if (shr instanceof ControlBroker) {
			controlBroker = (ControlBroker) shr;
			notifyAll();
		} else if (shr instanceof MessageContentSerializer) {
			messageContentSerializer = (MessageContentSerializer) shr;
			notifyAll();
		}
	}

	private void susbcribeFor(String clazzName) {
		Object[] ref = context.getContainer().fetchSharedObject(context, new Object[] { clazzName }, this);
		if (ref != null &amp;&amp; ref.length &gt; 0) {
			add(ref[0]);
		}
	}

	public void sharedObjectAdded(Object sharedObj, Object removeHook) {
		if (!stopping) {
			add(sharedObj);
		}
	}

	public void sharedObjectRemoved(Object removeHook) {
		if (removeHook instanceof SpaceManager) {
			spaceManager = null;
		} else if (removeHook instanceof ControlBroker) {
			controlBroker = null;
		} else if (removeHook instanceof MessageContentSerializer) {
			messageContentSerializer = null;
		}
	}

	public void stop() {
		stopping = true;
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/container/JUnit/JUnitModuleContext.java</td>
<td>universAAL Middleware Container JUnit</td>
<td>214</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/POJOModuleContext.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>162</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	}

	/** {@inheritDoc} */
	public boolean isLogErrorEnabled() {
		return Level.ERROR.isGreaterOrEqual(logger.getEffectiveLevel());
	}

	/** {@inheritDoc} */
	public boolean isLogWarnEnabled() {
		return Level.WARN.isGreaterOrEqual(logger.getEffectiveLevel());
	}

	/** {@inheritDoc} */
	public boolean isLogInfoEnabled() {
		return logger.isInfoEnabled();
	}

	/** {@inheritDoc} */
	public boolean isLogDebugEnabled() {
		return logger.isDebugEnabled();
	}

	/** {@inheritDoc} */
	public boolean isLogTraceEnabled() {
		return logger.isTraceEnabled();
	}

	/** {@inheritDoc} */
	public void registerConfigFile(Object[] configFileParams) {
		configFiles.add((File) configFileParams[0]);
	}

	/** {@inheritDoc} */
	public void setAttribute(String attrName, Object attrValue) {
		attributeMap.put(attrName, attrValue);
	}

	/** {@inheritDoc} */
	public boolean start(ModuleContext requester) {
		if (canBeStarted(requester)) {
			try {
				activator.start(this);
				return true;
			} catch (Exception e) {
				logger.error(&quot;Unable to start: &quot;
						+ activator.getClass().getPackage().getName(), e);
			}
		}
		return false;
	}

	/** {@inheritDoc} */
	public boolean stop(ModuleContext requester) {
		if (canBeStopped(requester)) {
			try {
				activator.stop(this);
				return true;
			} catch (Exception e) {
				logger.error(&quot;Unable to stop: &quot;
						+ activator.getClass().getPackage().getName(), e);
			}
		}
		return false;
	}

	/** {@inheritDoc} */
	public boolean uninstall(ModuleContext requester) {
		return false;
	}

	/** {@inheritDoc} */
	public Object getProperty(String name) {

		Object value = getAttribute(name);
		if (value != null)
			return value;

		value = System.getProperty(name);
		if (value != null)
			return value;

		value = System.getenv(name);
		if (value != null)
			return value;

		return null;
	}

	/** {@inheritDoc} */
	public Object getProperty(String name, Object def) {
		Object value = getProperty(name);
		if (value == null)
			return def;
		return value;
	}

	public String getManifestEntry(String name) {
		return null;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>69</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>66</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	private class LogEntry {
		int logLevel;
		String module;
		String pkg;
		String cls;
		String method;
		Object[] msgPart;
		Throwable t;

		public LogEntry(int logLevel, String module, String pkg, String cls, String method, Object[] msgPart,
				Throwable t) {
			super();
			this.logLevel = logLevel;
			this.module = module;
			this.pkg = pkg;
			this.cls = cls;
			this.method = method;
			this.msgPart = msgPart;
			this.t = t;
		}

		/**
		 * Internal method to create a single String from a list of objects.
		 *
		 * @param msgPart
		 *            The message of this log entry. All elements of this array
		 *            are converted to a string object and concatenated.
		 * @return The String.
		 */
		private String buildMsg(Object[] msgPart) {
			StringBuffer sb = new StringBuffer(256);
			if (msgPart != null)
				for (int i = 0; i &lt; msgPart.length; i++)
					sb.append(msgPart[i]);
			return sb.toString();
		}

		public String toString() {
			StringBuffer sb = new StringBuffer();
			sb.append(&quot;[&quot;);
			switch (logLevel) {
			case LogListener.LOG_LEVEL_TRACE:
				sb.append(&quot;TRACE&quot;);
				break;
			case LogListener.LOG_LEVEL_DEBUG:
				sb.append(&quot;DEBUG&quot;);
				break;
			case LogListener.LOG_LEVEL_INFO:
				sb.append(&quot;INFO&quot;);
				break;
			case LogListener.LOG_LEVEL_WARN:
				sb.append(&quot;WARN&quot;);
				break;
			case LogListener.LOG_LEVEL_ERROR:
				sb.append(&quot;ERROR&quot;);
				break;
			}

			sb.append(&quot;] -&gt; &quot;);
			sb.append(buildMsg(msgPart));
			if (t != null) {
				StringWriter sw = new StringWriter();
				PrintWriter pw = new PrintWriter(sw);
				t.printStackTrace(pw);
				sw.toString();
				sb.append(&quot;\n&quot; + t.toString() + &quot;\n&quot;);
				sb.append(sw.getBuffer());
			}
			return sb.toString();
		}
	}

	private class OntologyLoaderTask implements LogListener {
		Ontology ont;
		int attempts = 0;
		int warnings = 0;
		int errors = 0;
		List&lt;LogEntry&gt; logEntries = new ArrayList&lt;OntTestCase.LogEntry&gt;();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/service/ServiceCall.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>356</td></tr>
<tr class="a">
<td>org/universAAL/middleware/service/ServiceResponse.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>334</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			Object o = inputs.get(s);
			if (o instanceof Resource)
				addResource2SB((Resource) o, sb);
			else if (o instanceof List&lt;?&gt;)
				addList2SB((List&lt;?&gt;) o, sb);
			else
				sb.append(o);
		}
		sb.append(&quot;\n&quot;);
		return sb.toString();
	}
	
	private void addList2SB(List&lt;?&gt; l, StringBuffer sb) {
		sb.append(&quot;( &quot;);
		for (Object o : l) {
			if (o instanceof Resource)
				addResource2SB((Resource) o, sb);
			else if (o instanceof List&lt;?&gt;)
				addList2SB((List&lt;?&gt;) o, sb);
			else
				sb.append(o);
			sb.append(&quot; &quot;);
		}
		sb.append(&quot;)&quot;);
	}
	
	private void addResource2SB(Resource r, StringBuffer sb) {
		if (r == null) {
			sb.append(&quot;null&quot;);
			return;
		}
		
		if (!r.isAnon())
			sb.append(r.getURI()).append(&quot; &quot;);
		sb.append(&quot;a &quot;);
		Object o = r.getProperty(Resource.PROP_RDF_TYPE);
		if (o instanceof Resource)
			sb.append(((Resource) o).getURI());
		else if (o instanceof List&lt;?&gt;) {
			sb.append(&quot;( &quot;);
			for (Object t : (List&lt;?&gt;) o)
				if (t instanceof Resource)
					sb.append(((Resource) t).getURI()).append(&quot; &quot;);
			sb.append(&quot;)&quot;);
		} else
			sb.append(&quot;??type??&quot;);
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>203</td></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>196</td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			((JUnitModuleContext) mc).enableLog();
			// refresh ont instance
			try {
				ont = (Ontology) ont.getClass().newInstance();
			} catch (Exception e) {
				LogUtils.logError(mc, getClass(), &quot;unregister&quot;,
						new String[] { &quot;could not instantiate: &quot; + ont.getClass().getName() }, e);
			}
		}

		public void log(int logLevel, String module, String pkg, String cls, String method, Object[] msgPart,
				Throwable t) {
			LogEntry le = new LogEntry(logLevel, module, pkg, cls, method, msgPart, t);
			if (msgPart.length &gt; 0 &amp;&amp; !((String) msgPart[0]).contains(&quot;Unregistering ontology&quot;)
					&amp;&amp; !((String) msgPart[0]).contains(&quot;Registering ontology&quot;))
				logEntries.add(le);
			if (logLevel == LOG_LEVEL_ERROR)
				errors++;
			if (logLevel == LOG_LEVEL_WARN)
				warnings++;
		}

		public boolean allImportsRegistered() {
			Object imports = ont.getInfo().getProperty(Ontology.PROP_OWL_IMPORT);
			if (imports == null) {
				return true;
			}
			if (!(imports instanceof List)) {
				List a = new ArrayList();
				a.add(imports);
				imports = a;
			}
			String[] registeredA = OntologyManagement.getInstance().getOntoloyURIs();
			for (int i = 0; i &lt; registeredA.length; i++) {
				((List) imports).remove(new Resource(registeredA[i]));
			}
			return ((List) imports).isEmpty();
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org/universAAL/middleware/context/ContextEvent.java</td>
<td>universAAL Middleware Context Bus (Core)</td>
<td>524</td></tr>
<tr class="a">
<td>org/universAAL/middleware/service/ServiceCall.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>364</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/ServiceResponse.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>342</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		sb.append(&quot;\n&quot;);
		return sb.toString();
	}
	
	private void addList2SB(List&lt;?&gt; l, StringBuffer sb) {
		sb.append(&quot;( &quot;);
		for (Object o : l) {
			if (o instanceof Resource)
				addResource2SB((Resource) o, sb);
			else if (o instanceof List&lt;?&gt;)
				addList2SB((List&lt;?&gt;) o, sb);
			else
				sb.append(o);
			sb.append(&quot; &quot;);
		}
		sb.append(&quot;)&quot;);
	}
	
	private void addResource2SB(Resource r, StringBuffer sb) {
		if (r == null) {
			sb.append(&quot;null&quot;);
			return;
		}
		
		if (!r.isAnon())
			sb.append(r.getURI()).append(&quot; &quot;);
		sb.append(&quot;a &quot;);
		Object o = r.getProperty(Resource.PROP_RDF_TYPE);
		if (o instanceof Resource)
			sb.append(((Resource) o).getURI());
		else if (o instanceof List&lt;?&gt;) {
			sb.append(&quot;( &quot;);
			for (Object t : (List&lt;?&gt;) o)
				if (t instanceof Resource)
					sb.append(((Resource) t).getURI()).append(&quot; &quot;);
			sb.append(&quot;)&quot;);
		} else
			sb.append(&quot;??type??&quot;);
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/bus/junit/BusTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>174</td></tr>
<tr class="b">
<td>org/universAAL/middleware/container/pojo/dummyManagers/DummyCommunicationModule.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>32</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		CommunicationModule com = new CommunicationModule() {
			public void dispose() {
			}

			public String getDescription() {
				return null;
			}

			public String getName() {
				return null;
			}

			public String getProvider() {
				return null;
			}

			public String getVersion() {
				return null;
			}

			public boolean init() {
				return false;
			}

			public void loadConfigurations(Dictionary arg0) {
			}

			public void addMessageListener(MessageListener arg0, String arg1) {
			}

			public MessageListener getListenerByNameAndType(String arg0, Class arg1) {
				return null;
			}

			public boolean hasChannel(String arg0) {
				return true;
			}

			public void messageReceived(ChannelMessage arg0) {
			}

			public void removeMessageListener(MessageListener arg0, String arg1) {
			}

			public void send(ChannelMessage arg0, PeerCard arg1) throws CommunicationModuleException {
			}

			public void send(ChannelMessage arg0, MessageListener arg1, PeerCard arg2)
					throws CommunicationModuleException {
			}

			public void sendAll(ChannelMessage arg0) throws CommunicationModuleException {
			}

			public void sendAll(ChannelMessage arg0, List&lt;PeerCard&gt; arg1) throws CommunicationModuleException {
			}

			public void sendAll(ChannelMessage arg0, MessageListener arg1) throws CommunicationModuleException {
			}

			public void sendAll(ChannelMessage arg0, List&lt;PeerCard&gt; arg1, MessageListener arg2)
					throws CommunicationModuleException {
			}
		};</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/bus/junit/BusTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>113</td></tr>
<tr class="b">
<td>org/universAAL/middleware/container/pojo/dummyManagers/DummySpaceManager.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>50</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			public void dispose() {
			}

			public boolean init() {
				return false;
			}

			public void loadConfigurations(Dictionary arg0) {
			}

			public void addSpaceListener(SpaceListener arg0) {
			}

			public SpaceDescriptor getSpaceDescriptor() {
				return new SpaceDescriptor() {
					private static final long serialVersionUID = -7504183020450042989L;

					public SpaceCard getSpaceCard() {
						SpaceCard sc = new SpaceCard();
						sc.setSpaceID(&quot;TestSpaceID&quot;);
						return sc;
					}
				};
			}

			public Set&lt;SpaceCard&gt; getSpaces() {
				return null;
			}

			public Map&lt;String, SpaceDescriptor&gt; getManagedSpaces() {
				return null;
			}

			public MatchingResult getMatchingPeers(Map&lt;String, Serializable&gt; arg0) {
				return null;
			}

			public PeerCard getMyPeerCard() {
				return myCard;
			}

			public Map&lt;String, Serializable&gt; getPeerAttributes(List&lt;String&gt; arg0, PeerCard arg1) {
				return null;
			}

			public Map&lt;String, PeerCard&gt; getPeers() {
				HashMap map = new HashMap();
				map.put(myCard.getPeerID(), myCard);
				return map;
			}

			public void join(SpaceCard arg0) {
			}

			public void leaveSpace(SpaceDescriptor arg0) {
			}

			public void removeSpaceListener(SpaceListener arg0) {
			}
		};</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/managers/configuration/core/impl/LocalConfigurationParameterEditor.java</td>
<td>universAAL Middleware Manager Configuration (Core)</td>
<td>37</td></tr>
<tr class="b">
<td>org/universAAL/middleware/managers/configuration/core/impl/RemoteConfigurationParamaterEditor.java</td>
<td>universAAL Middleware Manager Configuration (Core)</td>
<td>41</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		super(configurationManagerImpl, uri);
	}

	/** {@ inheritDoc} */
	public Object getDefaultValue() {
		Entity e = getEntity();
		if (e instanceof ConfigurationParameter) {
			return ((ConfigurationParameter) e).getDefaultValue();
		}
		return null;
	}

	/** {@ inheritDoc} */
	public MergedRestriction getType() {
		Entity e = getEntity();
		if (e instanceof ConfigurationParameter) {
			return ((ConfigurationParameter) e).getValueRestriction();
		}
		return null;
	}

	/** {@ inheritDoc} */
	public boolean isDefaultValue() {
		Entity e = getEntity();
		if (e instanceof ConfigurationParameter) {
			Object dVal = ((ConfigurationParameter) e).getDefaultValue();
			return ((ConfigurationParameter) e).getValue().equals(dVal);
		}
		return false;
	}

	/** {@ inheritDoc} */
	public boolean setDefaultValue() {
		Entity e = getEntity();
		if (e instanceof ConfigurationParameter) {
			Object dVal = ((ConfigurationParameter) e).getDefaultValue();
			return setValue((ConfigurationParameter) e, dVal);
		}
		return false;
	}

	/**
	 * @param e
	 * @param dVal
	 * @return
	 */
	boolean setValue(ConfigurationParameter e, Object val) {
		if (e.setValue(val)) {
			e.incrementVersion();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/context/ContextEvent.java</td>
<td>universAAL Middleware Context Bus (Core)</td>
<td>536</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/ServiceCall.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>376</td></tr>
<tr class="a">
<td>org/universAAL/middleware/service/ServiceRequest.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>584</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/ServiceResponse.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>354</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				sb.append(o);
			sb.append(&quot; &quot;);
		}
		sb.append(&quot;)&quot;);
	}
	
	private void addResource2SB(Resource r, StringBuffer sb) {
		if (r == null) {
			sb.append(&quot;null&quot;);
			return;
		}
		
		if (!r.isAnon())
			sb.append(r.getURI()).append(&quot; &quot;);
		sb.append(&quot;a &quot;);
		Object o = r.getProperty(Resource.PROP_RDF_TYPE);
		if (o instanceof Resource)
			sb.append(((Resource) o).getURI());
		else if (o instanceof List&lt;?&gt;) {
			sb.append(&quot;( &quot;);
			for (Object t : (List&lt;?&gt;) o)
				if (t instanceof Resource)
					sb.append(((Resource) t).getURI()).append(&quot; &quot;);
			sb.append(&quot;)&quot;);
		} else
			sb.append(&quot;??type??&quot;);
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>751</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1448</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>										Object ok = getOutputValue(goods.get(k), af);
										if (oj instanceof AbsLocation)
											if (ok == null)
												points[k]++;
											else {
												float dj = ((AbsLocation) oj)
														.getDistanceTo((AbsLocation) params.get(1));
												float dk = ((AbsLocation) ok)
														.getDistanceTo((AbsLocation) params.get(1));
												if (dj &gt; dk)
													points[k]++;
												else if (dk &gt; dj)
													points[j]++;
											}
										else {
											points[j]++;
											if (!(ok instanceof AbsLocation))
												points[k]++;
										}
									}
								}
								break;
							}
						}
						int ind = 0, min = points[0];
						for (int i = 1; i &lt; size; i++)
							if (points[i] &lt; min) {
								ind = i;
								min = points[i];
							}
						for (int j = 0; j &lt; ind; j++, size--)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/shell/universAAL/osgi/ConfigPullCommand.java</td>
<td>universAAL Middleware Karaf Shell Commands for configuring stuff</td>
<td>42</td></tr>
<tr class="b">
<td>org/universAAL/middleware/shell/universAAL/osgi/ConfigPushCommand.java</td>
<td>universAAL Middleware Karaf Shell Commands for configuring stuff</td>
<td>42</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    @Argument(index = 1, name = &quot;path&quot;, description = &quot;Local Path to copy the file to&quot;, required = true, multiValued = false)
    String path = null;
    
    @Override
    protected Object doExecute() throws Exception {

	List&lt;EntityPattern&gt; pattern = new ArrayList&lt;EntityPattern&gt;();
	// only for File configuration.
	pattern.add(new ConfigurationFileTypePattern());

	if (parameter != null &amp;&amp; !parameter.isEmpty()){
	    pattern.add(new IdPattern(parameter));
	}
	else {
	    System.out.println(&quot;no parameter selected&quot;);
	}
	String locale = &quot;en&quot;;
	List&lt;ConfigurableEntityEditor&gt; ents = getConfigurationEditor().getMatchingConfigurationEditors(pattern, new Locale(locale));

	if (ents.size() == 0){
	    System.out.println(&quot;No Entity found by the given Id&quot;);
	    return null;
	}

	ConfigurationFileEditor selected = null;

	if (ents.size() &gt; 1){
	    //TODO select menu
	}
	else {
	    selected = (ConfigurationFileEditor) ents.get(0);
	}
	
	File dest = new File(path);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>ch/ethz/iks/slp/impl/AttributeReply.java</td>
<td>universAAL Thirdparty jslp library (Core)</td>
<td>187</td></tr>
<tr class="b">
<td>ch/ethz/iks/slp/impl/ServiceRegistration.java</td>
<td>universAAL Thirdparty jslp library (Core)</td>
<td>231</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	List spiList = stringToList(spiStr, &quot;,&quot;);
	authBlocks = new AuthenticationBlock[spiList.size()];
	for (int k = 0; k &lt; spiList.size(); k++) {
	    int timestamp = SLPUtils.getTimestamp();

	    String spi = (String) spiList.get(k);
	    byte[] data = getAuthData(spi, timestamp);
	    authBlocks[k] = new AuthenticationBlock(
		    AuthenticationBlock.BSD_DSA, spi, timestamp, data, null);
	}
    }

    /**
     * verify this AttributeReply.
     *
     * @return true if verification suceeds.
     * @throws ServiceLocationException
     *             in case of IO errors.
     */
    boolean verify() throws ServiceLocationException {
	for (int i = 0; i &lt; authBlocks.length; i++) {
	    if (authBlocks[i].verify(getAuthData(authBlocks[i].getSPI(),
		    authBlocks[i].getTimestamp()))) {
		return true;
	    }
	}
	return false;
    }

    /**
     * get the authentication data.
     *
     * @param spiStr
     *            the SPI.
     * @param timestamp
     *            the timestamp.
     * @return the auth data.
     * @throws ServiceLocationException
     *             in case of IO errors.
     */
    private byte[] getAuthData(final String spiStr, final int timestamp)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/container/pojo/POJOModuleContext.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>137</td></tr>
<tr class="b">
<td>org/universAAL/middleware/container/osgi/OSGiModuleContext.java</td>
<td>universAAL Middleware Container (OSGi)</td>
<td>243</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	}

	/** {@inheritDoc} */
	public void logDebug(String tag, String message, Throwable t) {
		logger.debug(tag + &quot;: &quot; + message, t);
	}

	/** {@inheritDoc} */
	public void logError(String tag, String message, Throwable t) {
		logger.error(tag + &quot;: &quot; + message, t);
	}

	/** {@inheritDoc} */
	public void logInfo(String tag, String message, Throwable t) {
		logger.info(tag + &quot;: &quot; + message, t);
	}

	/** {@inheritDoc} */
	public void logWarn(String tag, String message, Throwable t) {
		logger.warn(tag + &quot;: &quot; + message, t);
	}

	/** {@inheritDoc} */
	public void logTrace(String tag, String message, Throwable t) {
		logger.trace(tag + &quot;: &quot; + message, t);
	}

	/** {@inheritDoc} */
	public boolean isLogErrorEnabled() {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>725</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1422</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>										Object ok = getOutputValue(goods.get(k), af);
										if (oj instanceof AbsLocation)
											if (ok == null)
												points[k]++;
											else {
												float dj = ((AbsLocation) oj)
														.getDistanceTo((AbsLocation) params.get(1));
												float dk = ((AbsLocation) ok)
														.getDistanceTo((AbsLocation) params.get(1));
												if (dj &lt; dk)
													points[k]++;
												else if (dk &lt; dj)
													points[j]++;
											}
										else {
											points[j]++;
											if (!(ok instanceof AbsLocation))
												points[k]++;
										}
									}
								}
								break;
							case AggregationFunction.MAX_DISTANCE_TO_REF_LOC:
								for (int j = 0; j &lt; size; j++) {
									Object oj = getOutputValue(goods.get(j), af);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1418</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1444</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>								case AggregationFunction.MIN_DISTANCE_TO_REF_LOC:
									for (int j = 0; j &lt; size; j++) {
										Object oj = getProfileParameter(matches.get(j), pp[1]);
										for (int k = j + 1; k &lt; size; k++) {
											Object ok = getProfileParameter(matches.get(k), pp[1]);
											if (oj instanceof AbsLocation)
												if (ok == null)
													points[k]++;
												else {
													float dj = ((AbsLocation) oj)
															.getDistanceTo((AbsLocation) params.get(1));
													float dk = ((AbsLocation) ok)
															.getDistanceTo((AbsLocation) params.get(1));
													if (dj &lt; dk)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/bus/junit/OntTestCase.java</td>
<td>universAAL Middleware Bus JUnit</td>
<td>146</td></tr>
<tr class="b">
<td>org/universAAL/middleware/container/pojo/layers/OntAutoLoader.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>143</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		List&lt;LogEntry&gt; logEntries = new ArrayList&lt;OntTestCase.LogEntry&gt;();

		public OntologyLoaderTask(Ontology ont) {
			super();
			this.ont = ont;
		}

		String report() {
			if (warnings == 0 &amp;&amp; errors == 0) {
				return &quot;&quot;;
			}
			String ret = &quot;(&quot;;
			if (warnings &gt; 0) {
				ret += &quot;warnings: &quot; + Integer.toString(warnings) + &quot; &quot;;
			}
			if (errors &gt; 0) {
				ret += &quot;errors: &quot; + Integer.toString(errors) + &quot; &quot;;
			}
			ret += &quot;)&quot;;
			return ret;
		}

		void attempt() {
			if (ont.getInfo() != null &amp;&amp; OntologyManagement.getInstance().isRegisteredOntology(ont.getInfo().getURI()))
				return;
			attempts++;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/api/impl/SimplifiedApiService.java</td>
<td>universAAL Middleware Service Annotated API (Core)</td>
<td>91</td></tr>
<tr class="b">
<td>org/universAAL/middleware/api/impl/SimplifiedApiService.java</td>
<td>universAAL Middleware Service Annotated API (Core)</td>
<td>143</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public void createInputWrapper(String baseURI, Class&lt;?&gt; clazz, Cardinality card, String[] propertyPaths)
			throws SimplifiedRegistrationException {
		int minCard, maxCard;
		switch (card) {
		case ONE_TO_ONE:
			minCard = maxCard = 1;
			break;
		case MANY_TO_MANY:
			minCard = maxCard = 0;
			break;
		default:
			throw new IllegalArgumentException();
		}
		// this will return uri if this is one of the predefined types
		// otherwise check for MY_URI field
		String myUri = TypeMapper.getDatatypeURI(clazz);
		if (myUri == null || myUri.endsWith(&quot;anyURI&quot;)) {
			try {
				Object value = clazz.getField(&quot;MY_URI&quot;).get(null);
				myUri = (String) value;
			} catch (Exception e) {
				e.printStackTrace();
				throw new SimplifiedRegistrationException(&quot;Exception during resolving MY_URI field:&quot; + e.getMessage());
			}
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/owl/ExactCardinalityRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>124</td></tr>
<tr class="b">
<td>org/universAAL/middleware/owl/MaxCardinalityRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>120</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			return getValue() == ((List) value).size();
	}

	@Override
	public boolean isDisjointWith(TypeExpression other, HashMap context, int ttl, List&lt;MatchLogEntry&gt; log) {
		ttl = checkTTL(ttl);
		if (!(other instanceof PropertyRestriction))
			return other.isDisjointWith(this, context, ttl, log);

		PropertyRestriction r = (PropertyRestriction) other;
		Object o = getOnProperty();
		if (o == null || !o.equals(r.getOnProperty()))
			return false;

		if (r instanceof MinCardinalityRestriction) {
			if (getValue() &lt; ((MinCardinalityRestriction) r).getValue())
				return true;
		} else if (r instanceof MaxCardinalityRestriction) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>721</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>747</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>							case AggregationFunction.MIN_DISTANCE_TO_REF_LOC:
								for (int j = 0; j &lt; size; j++) {
									Object oj = getOutputValue(goods.get(j), af);
									for (int k = j + 1; k &lt; size; k++) {
										Object ok = getOutputValue(goods.get(k), af);
										if (oj instanceof AbsLocation)
											if (ok == null)
												points[k]++;
											else {
												float dj = ((AbsLocation) oj)
														.getDistanceTo((AbsLocation) params.get(1));
												float dk = ((AbsLocation) ok)
														.getDistanceTo((AbsLocation) params.get(1));
												if (dj &lt; dk)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/owls/profile/NumberOfSamples.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>55</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/owls/profile/ResponseTimeInMilliseconds.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>55</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public int getNumberOfSamples() {
		Object o = props.get(PROP_PARAMETER_VALUE_DATA);
		return (o instanceof Integer) ? ((Integer) o).intValue() : -1;
	}

	/**
	 * This method sets the property of &lt;propURI&gt; with &lt;value&gt;.
	 */
	public boolean setProperty(String propURI, Object value) {
		if (propURI != null &amp;&amp; value != null &amp;&amp; !props.containsKey(propURI))
			if (propURI.equals(PROP_OWLS_PROFILE_SERVICE_PARAMETER_NAME)) {
				if (value instanceof String) {
					props.put(propURI, value);
					return true;
				}
			} else if (propURI.equals(PROP_OWLS_PROFILE_S_PARAMETER)) {
				if (value instanceof Integer &amp;&amp; ((Integer) value).intValue() &gt; -1) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/container/JUnit/JUnitContainer.java</td>
<td>universAAL Middleware Container JUnit</td>
<td>56</td></tr>
<tr class="b">
<td>org/universAAL/middleware/container/pojo/POJOContainer.java</td>
<td>universAAL Middleware Container POJORunner</td>
<td>81</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	}

	/** {@inheritDoc} */
	public Object fetchSharedObject(ModuleContext requester, Object[] fetchParams) {
		return sharedObjectMap.get(fetchParams[0]);
	}

	/** {@inheritDoc} */
	public Object[] fetchSharedObject(ModuleContext requester, Object[] fetchParams, SharedObjectListener listener) {
		synchronized (listeners) {
			listeners.add(listener);
		}
		return new Object[] { fetchSharedObject(requester, fetchParams) };
	}

	/** {@inheritDoc} */
	public void removeSharedObjectListener(SharedObjectListener listener) {
		if (listener != null) {
			synchronized (listeners) {
				listeners.remove(listener);
			}
		}
	}

	/** {@inheritDoc} */
	public ModuleContext installModule(ModuleContext requester, Object[] installParams) {
		// no installing.
		return null;
	}

	/** Register a LogListener */
	public void registerLogListener(LogListener listener) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/managers/configuration/core/impl/LocalConfigurationFileEditor.java</td>
<td>universAAL Middleware Manager Configuration (Core)</td>
<td>46</td></tr>
<tr class="b">
<td>org/universAAL/middleware/managers/configuration/core/impl/RemoteConfigurationFileEditor.java</td>
<td>universAAL Middleware Manager Configuration (Core)</td>
<td>42</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		super(configurationManagerImpl, uri);
	}

	/** {@ inheritDoc} */
	public URL getDefaultFileRef() {
		Entity e = getEntity();
		if (e instanceof ConfigurationFile) {
			try {
				return new URL(((ConfigurationFile) e).getDefaultURL());
			} catch (MalformedURLException e1) {
				e1.printStackTrace();
			}
		}
		return null;
	}

	/** {@ inheritDoc} */
	public String getExtensionfilter() {
		Entity e = getEntity();
		if (e instanceof ConfigurationFile) {
			return ((ConfigurationFile) e).getExtensionFilter();
		}
		return null;
	}

	/** {@ inheritDoc} */
	public boolean isDefaultValue() {
		Entity e = getEntity();
		if (e instanceof ConfigurationFile) {
			ConfigurationFile cf = (ConfigurationFile) e;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/owl/AllValuesFromRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>144</td></tr>
<tr class="b">
<td>org/universAAL/middleware/owl/SomeValuesFromRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>112</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		return true;
	}

	@Override
	public boolean isDisjointWith(TypeExpression other, HashMap context, int ttl, List&lt;MatchLogEntry&gt; log) {
		ttl = checkTTL(ttl);
		if (!(other instanceof PropertyRestriction))
			return other.isDisjointWith(this, context, ttl, log);

		PropertyRestriction r = (PropertyRestriction) other;
		Object o = getOnProperty();
		if (o == null || !o.equals(r.getOnProperty()))
			return false;

		HashMap cloned = (context == null) ? null : (HashMap) context.clone();

		TypeExpression myValues = (TypeExpression) getProperty(PROP_OWL_ALL_VALUES_FROM);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/managers/deploy/uapp/model/AalUapp.java</td>
<td>universAAL Middleware XSD Schemas</td>
<td>1129</td></tr>
<tr class="b">
<td>org/universAAL/middleware/managers/deploy/uapp/model/Part.java</td>
<td>universAAL Middleware XSD Schemas</td>
<td>333</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public static class ApplicationCapabilities implements Serializable {

		private final static long serialVersionUID = 12343L;
		@XmlElement(required = true)
		protected List&lt;CapabilityType&gt; capability;

		/**
		 * Gets the value of the capability property.
		 *
		 * &lt;p&gt;
		 * This accessor method returns a reference to the live list, not a
		 * snapshot. Therefore any modification you make to the returned list
		 * will be present inside the JAXB object. This is why there is not a
		 * &lt;CODE&gt;set&lt;/CODE&gt; method for the capability property.
		 *
		 * &lt;p&gt;
		 * For example, to add a new item, do as follows:
		 *
		 * &lt;pre&gt;
		 * getCapability().add(newItem);
		 * &lt;/pre&gt;
		 *
		 *
		 * &lt;p&gt;
		 * Objects of the following type(s) are allowed in the list
		 * {@link CapabilityType }
		 *
		 *
		 */
		public List&lt;CapabilityType&gt; getCapability() {
			if (capability == null) {
				capability = new ArrayList&lt;CapabilityType&gt;();
			}
			return this.capability;
		}

		public boolean isSetCapability() {
			return ((this.capability != null) &amp;&amp; (!this.capability.isEmpty()));
		}

		public void unsetCapability() {
			this.capability = null;
		}

	}

	/**
	 * &lt;p&gt;
	 * Java class for anonymous complex type.
	 *
	 * &lt;p&gt;
	 * The following schema fragment specifies the expected content contained
	 * within this class.
	 *
	 * &lt;pre&gt;
	 * &amp;lt;complexType&gt;
	 *   &amp;lt;complexContent&gt;
	 *     &amp;lt;restriction base=&quot;{http://www.w3.org/2001/XMLSchema}anyType&quot;&gt;
	 *       &amp;lt;sequence&gt;
	 *         &amp;lt;element name=&quot;contactPoint&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&gt;
	 *         &amp;lt;element name=&quot;remoteManagement&quot; minOccurs=&quot;0&quot;&gt;
	 *           &amp;lt;complexType&gt;
	 *             &amp;lt;complexContent&gt;
	 *               &amp;lt;restriction base=&quot;{http://www.w3.org/2001/XMLSchema}anyType&quot;&gt;
	 *                 &amp;lt;sequence&gt;
	 *                   &amp;lt;element name=&quot;protocols&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot; maxOccurs=&quot;unbounded&quot;/&gt;
	 *                   &amp;lt;element name=&quot;software&quot; type=&quot;{http://www.universaal.org/aal-uapp/v1.0.2}artifactType&quot;/&gt;
	 *                 &amp;lt;/sequence&gt;
	 *               &amp;lt;/restriction&gt;
	 *             &amp;lt;/complexContent&gt;
	 *           &amp;lt;/complexType&gt;
	 *         &amp;lt;/element&gt;
	 *       &amp;lt;/sequence&gt;
	 *     &amp;lt;/restriction&gt;
	 *   &amp;lt;/complexContent&gt;
	 * &amp;lt;/complexType&gt;
	 * &lt;/pre&gt;
	 *
	 *
	 */
	@XmlAccessorType(XmlAccessType.FIELD)
	@XmlType(name = &quot;&quot;, propOrder = { &quot;contactPoint&quot;, &quot;remoteManagement&quot; })</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/owl/AllValuesFromRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>117</td></tr>
<tr class="b">
<td>org/universAAL/middleware/owl/SomeValuesFromRestriction.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>83</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		return copyTo(new AllValuesFromRestriction());
	}

	@Override
	public boolean hasMember(Object member, HashMap context, int ttl, List&lt;MatchLogEntry&gt; log) {
		ttl = checkTTL(ttl);
		if (!(member instanceof Resource))
			return member == null;

		Object o = ((Resource) member).getProperty(getOnProperty());
		if (o == null)
			return true;
		if (!(o instanceof List)) {
			List aux = new ArrayList(1);
			aux.add(o);
			o = aux;
		}
		int size = ((List) o).size();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/connectors/communication/jgroups/JGroupsCommunicationConnector.java</td>
<td>universAAL Middleware Connector Communication JGroups (Core)</td>
<td>583</td></tr>
<tr class="b">
<td>org/universAAL/middleware/connectors/deploy/karaf/KarafDeployConnector.java</td>
<td>universAAL Middleware Deploy Connector Karaf (OSGi)</td>
<td>127</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					&quot;JGroups Connector properties are null&quot;);
			return;
		}
		try {
			this.name = (String) configurations.get(org.universAAL.middleware.connectors.util.Consts.CONNECTOR_NAME);
			this.version = (String) configurations
					.get(org.universAAL.middleware.connectors.util.Consts.CONNECTOR_VERSION);
			this.description = (String) configurations
					.get(org.universAAL.middleware.connectors.util.Consts.CONNECTOR_DESCRIPTION);
			this.provider = (String) configurations
					.get(org.universAAL.middleware.connectors.util.Consts.CONNECTOR_PROVIDER);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>679</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1376</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>										Object ok = getOutputValue(goods.get(k), af);
										if (oj instanceof Comparable)
											if (ok == null)
												points[k]++;
											else {
												int l = ((Comparable) oj).compareTo(ok);
												if (l &lt; 0)
													points[k]++;
												else if (l &gt; 0)
													points[j]++;
											}
										else {
											points[j]++;
											if (!(ok instanceof Comparable))
												points[k]++;
										}
									}
								}
								break;
							case AggregationFunction.MAX_OF:
								for (int j = 0; j &lt; size; j++) {
									Object oj = getOutputValue(goods.get(j), af);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>702</td></tr>
<tr class="b">
<td>org/universAAL/middleware/service/impl/ServiceStrategy.java</td>
<td>universAAL Middleware Service Bus (Core)</td>
<td>1399</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>										Object ok = getOutputValue(goods.get(k), af);
										if (oj instanceof Comparable)
											if (ok == null)
												points[k]++;
											else {
												int l = ((Comparable) oj).compareTo(ok);
												if (l &gt; 0)
													points[k]++;
												else if (l &lt; 0)
													points[j]++;
											}
										else {
											points[j]++;
											if (!(ok instanceof Comparable))
												points[k]++;
										}
									}
								}
								break;
							case AggregationFunction.MIN_DISTANCE_TO_REF_LOC:
								for (int j = 0; j &lt; size; j++) {
									Object oj = getOutputValue(goods.get(j), af);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>ch/ethz/iks/slp/impl/AttributeReply.java</td>
<td>universAAL Thirdparty jslp library (Core)</td>
<td>197</td></tr>
<tr class="b">
<td>ch/ethz/iks/slp/impl/DAAdvertisement.java</td>
<td>universAAL Thirdparty jslp library (Core)</td>
<td>210</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    }

    /**
     * verify this AttributeReply.
     *
     * @return true if verification suceeds.
     * @throws ServiceLocationException
     *             in case of IO errors.
     */
    boolean verify() throws ServiceLocationException {
	for (int i = 0; i &lt; authBlocks.length; i++) {
	    if (authBlocks[i].verify(getAuthData(authBlocks[i].getSPI(),
		    authBlocks[i].getTimestamp()))) {
		return true;
	    }
	}
	return false;
    }

    /**
     * get the authentication data.
     *
     * @param spiStr
     *            the SPI.
     * @param timestamp
     *            the timestamp.
     * @return the auth data.
     * @throws ServiceLocationException
     *             in case of IO errors.
     */
    private byte[] getAuthData(final String spiStr, final int timestamp)
	    throws ServiceLocationException {
	try {
	    ByteArrayOutputStream bos = new ByteArrayOutputStream();
	    DataOutputStream dos = new DataOutputStream(bos);
	    dos.writeUTF(spiStr);
	    dos.writeUTF(listToString(attributes, &quot;,&quot;));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org/universAAL/middleware/owl/Intersection.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>212</td></tr>
<tr class="b">
<td>org/universAAL/middleware/owl/Union.java</td>
<td>universAAL Middleware Data Representation (Core)</td>
<td>198</td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					Object tmp = TypeURI.asTypeURI(o);
					if (tmp != null)
						o = tmp;
					if (o instanceof TypeExpression)
						retVal = addType((TypeExpression) o) || retVal;
					else {
						types.clear();
						break;
					}
				}
				return retVal;
			} else {
				Object tmp = TypeURI.asTypeURI(o);
				if (tmp != null)
					o = tmp;
				if (o instanceof TypeExpression)
					return addType((TypeExpression) o);
			}
		}
		return false;
	}

	/**
	 * Get an iterator for the child type expressions.
	 *
	 * @return an iterator for the child type expressions.
	 */
	public Iterator&lt;TypeExpression&gt; types() {
		return types.iterator();
	}</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    ${currentYear}
                        <a href="http://www.universAAL.org/">universAAL Consortium</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
